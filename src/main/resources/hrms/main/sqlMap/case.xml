<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="hrms.case">
    <select id="selectSeq" parameterType="map" resultType="java.lang.Integer">
      SELECT
          IFNULL(MAX(SEQ),0) + 1 AS SEQ
      FROM
          T_B_CASE
      WHERE
          USERID = #{userId}
    </select>
    <select id="selectCaseList" parameterType="map" resultType="map">
      SELECT
          SEQ
          ,CASENAME
          ,WORKPLACE
          ,WORKCONTENT
          ,START_DATE
          ,END_DATE
          ,MEMO
      FROM
          T_B_CASE
      WHERE
          1 = 1
          <if test="companyId != null">
            AND USERID = #{companyId}
          </if>
          <if test="casename != null and casename != ''">
            AND A.CASENAME LIKE concat('%',#{casename},'%')
          </if>
    </select>
</mapper>