<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="hrms.people">

    <select id="selectPeopleSkillList" parameterType="map" resultType="hrms.model.PeopleSkill">
      SELECT
		PERSON_ID
		,SKILLKBN
		,SKILL
		,EXP
		,LEVEL
      FROM
          T_B_PERSON_SKILL
      WHERE
          1 = 1
          <if test="PERSON_ID != null">
            AND PERSON_ID= #{PERSON_ID}
            AND SKILLKBN= #{SKILLKBN}
          </if>
    </select>
    <select id="selectcities" parameterType="map" resultType="String">
      SELECT
		city
      FROM
          T_B_ADDRESS
      WHERE
          1 = 1
          <if test="Prefecture != null">
            AND Prefecture= #{Prefecture}
          </if>
    </select>
    <select id="selectskills" parameterType="map" resultType="String">
      SELECT
		skill
      FROM
          T_B_SKILL
      WHERE
          1 = 1
          <if test="type != null">
            AND TYPE= #{type}
          </if>
          order by priority DESC
    </select>
  <select id="selectPeopleCarearList" parameterType="map" resultType="hrms.model.PeopleProject">
      SELECT
		 PERSON_ID
		,PJ_NAME
		,START_YM
		,END_YM
		,BUSSNESS_TYPE
		,WORK_CONTENTS
		,WORK_PLACE
		,LANGUAGE
		,DEV_ENV
		,PHASE_RD
		,PHASE_BD
		,PHASE_DD
		,PHASE_CD
		,PHASE_UT
		,PHASE_IT
		,PHASE_ST
		,PHASE_OT
		,ROLE_TESTER
		,ROLE_PG
		,PHASE_FD
		,ROLE_SE
		,ROLE_BSE
		,ROLE_SL
		,ROLE_TL
		,ROLE_PM
		,ROLE_PMO
		,ROLE_AM
		,ROLE_ARCH
		,ROLE_CONSUL
		,MEMO
      FROM
          T_B_PERSON_PJ
      WHERE
          1 = 1
          <if test="PERSON_ID != null">
            AND PERSON_ID= #{PERSON_ID}
          </if>
    </select>
    
    <select id="selectInterviewList" parameterType="map" resultType="hrms.model.Interview">
      SELECT
          INTERVIEW_ID as interviewid
          ,COMPANY_ID as companyid
          ,PERSON_ID as personid
          ,CASE_NAME as casename
          ,WORK_PLACE as workplace
          ,INTERVIEW_PLACE as interviewplace
          ,INTERVIEW_DATE as interviewdate
          ,START_TIME as starttime
          ,END_TIME as endtime
          ,INTERVIEW_DATE1 as interviewdate1
          ,START_TIME1 as starttime1
          ,END_TIME1 as endtime1
          ,INTERVIEW_DATE2 as interviewdate2
          ,START_TIME2 as starttime2
          ,END_TIME2 as endtime2
          ,INTERVIEW_DATE3 as interviewdate3
          ,START_TIME3 as starttime3
          ,END_TIME3 as endtime3
          ,WORK_CONTENTS as workcontents
          ,CASE INTERVIEW_RESULT
WHEN '1' THEN '招待された'
WHEN '2' THEN '面接を受けた'
WHEN '3' THEN '面接を断った'
WHEN '4' THEN '結果まち'
WHEN '5' THEN '合格'
WHEN '6' THEN '不合格'
WHEN '7' THEN '面接がキャンセルされた'
WHEN '8' THEN '面接参加をキャンセルした'
WHEN '9' THEN '合格を辞退した'
ELSE 'なし' END as interviewresult
          ,CREATE_USER 
          ,CREATE_DATE_TIME 
          ,UPDATE_USER 
          ,UPDATE_DATE_TIME 
          ,CREATED_BY
          ,UPDATED_BY
           ,rateToCompany as rateToCompany
            ,messageToCompany as messageToCompany
      FROM
          T_B_INTERVIEW
      WHERE
          1 = 1
          <if test="personId != null">
            AND PERSON_ID = #{personId}
          </if>
           <if test="casename != null">
            AND CASE_NAME like concat('%',#{casename},'%')
          </if>
           <if test="casetime != null">
            AND INTERVIEW_DATE like concat('%',#{casetime},'%')
          </if>
          <if test="caseplace != null">
            AND INTERVIEW_PLACE like concat('%',#{caseplace},'%')
          </if>
           <if test="result != null">
            AND INTERVIEW_RESULT =#{result}
          </if>
          ORDER BY UPDATE_DATE_TIME DESC
          LIMIT  #{mylimit}
          OFFSET #{myoffset}
    </select>

    <select id="selectInterviewNum" parameterType="map" resultType="map">
      SELECT
        count(*) as count
      FROM
          T_B_INTERVIEW
      WHERE
          1 = 1
          <if test="personId != null">
            AND PERSON_ID = #{personId}
          </if>

    </select>
</mapper>